% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reduceTo.R
\name{reduceTo}
\alias{reduceTo}
\title{Find Optimal Short-Form Scales}
\usage{
reduceTo(
  data,
  n.items,
  n.sets = 5,
  item.names = FALSE,
  r.sq = FALSE,
  generate = FALSE,
  item.set = 1,
  na.rm = TRUE,
  targ = NULL,
  optimise = NULL,
  scale = F,
  ceiling = 10^5
)
}
\arguments{
\item{data}{A numeric matrix or data.frame containing the item responses.}

\item{n.items}{The desired number of items in the final short-form scale.}

\item{n.sets}{The number of top-performing item sets to return. Defaults to 5.}

\item{item.names}{Logical. If TRUE, the output will list the item names instead
of their column numbers. Defaults to FALSE.}

\item{r.sq}{Logical. If TRUE, the squared correlation (R-squared) is returned
alongside the correlation. Defaults to FALSE.}

\item{generate}{Logical. If TRUE, the function returns the computed scores for
the single best item set. Defaults to FALSE.}

\item{item.set}{An integer specifying which item set to generate scores for
(e.g., 1 for the best set). Only used if `generate = TRUE`.}

\item{na.rm}{Logical. If TRUE, missing values are handled by pairwise deletion
or row-wise removal in means. Defaults to TRUE.}

\item{targ}{An optional numeric vector to serve as the target criterion.
If NULL (the default), the mean score of the full scale is used.}

\item{optimise}{Logical or NULL. Controls the optimisation process.
- `NULL` (default): If combinations exceed `ceiling`, prompts the user to
  choose between continuing, optimising, or quitting.
- `TRUE`: Automatically runs the optimisation process if combinations
  exceed `ceiling`.
- `FALSE`: Proceeds with the full, non-optimised process, even if
  combinations exceed `ceiling` (after a warning).}

\item{scale}{Logical. Defaults to FALSE, in which case mean-centered; if TRUE it will mean-centre and scale
all columns in the dataset.}

\item{ceiling}{Numeric. The number of combinations above which the `optimise`
prompt or process is triggered. Defaults to 100,000.}
}
\value{
A data.frame listing the top `n.sets` of items and their correlation
  with the target. If `generate = TRUE`, returns a numeric vector of scores
  for the selected `item.set`.
}
\description{
This function systematically evaluates subsets of items from a larger scale
to find the combination that correlates most highly with a target criterion.
It includes optimizations for handling a very large number of combinations,
such as iterative item reduction (optimisation) and memory-efficient batch processing.
}
\examples{
\dontrun{
library(MASS) 
# Note: The 'psych' package is required for pca() if using optimisation.
library(psych)

# 1. Create simulated data
set.seed(42)
loadings <- c(rnorm(10,0.75,0.08)*sign(rnorm(10)))
target_cor_matrix <- outer(loadings, loadings)
diag(target_cor_matrix) <- 1
simulated_data <- MASS::mvrnorm(n = 200, mu = rep(0, 10), 
                                Sigma = target_cor_matrix, empirical = TRUE)
simulated_data <- as.data.frame(simulated_data)
colnames(simulated_data) <- paste0("item_", 1:10)

# 2. Reduce the scale to 3 items
reduceTo(simulated_data, 3)

# 3. Reduce a larger set, triggering the optimisation
large_data <- as.data.frame(matrix(rnorm(200*30), 200, 30))
colnames(large_data) <- paste0("item_", 1:30)
reduceTo(large_data, 5, optimise = TRUE, item.names = TRUE)
}

}
\author{
Paddy Maher, Goldsmiths, University of London. Contact: paddycarstenmaher@gmail.com
}
